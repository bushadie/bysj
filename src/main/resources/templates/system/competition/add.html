<!DOCTYPE HTML>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.w3.org/1999/xhtml">
<meta charset="utf-8">
<head th:include="include :: header"></head>
<body class="white-bg">
<div class="wrapper wrapper-content animated fadeInRight ibox-content">
    <form class="form-horizontal m" id="form-competition-add">
        <!--<div class="form-group">-->
        <!--<label class="col-sm-3 control-label">负责人id：</label>-->
        <!--<div class="col-sm-8">-->
        <!--<input id="uid" name="uid" class="form-control" type="text">-->
        <!--</div>-->
        <!--</div>-->
        <div class="form-group">
            <label class="col-sm-3 control-label">事务名称：</label>
            <div class="col-sm-8">
                <input id="title" name="title" class="form-control" type="text">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">开始时间：</label>
            <div class="col-sm-8">
                <input id="startTime" name="startTime" class="form-control  time-input" type="text">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">报名结束时间：</label>
            <div class="col-sm-8">
                <input id="endTime" name="endTime" class="form-control  time-input" type="text">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">总报名人数：</label>
            <div class="col-sm-8">
                <input id="num" name="num" class="form-control disabled" type="text" readonly="readonly"
                       oninput="value=value.replace(/[^\d]/g,'')">
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label">状态：</label>
            <div class="col-sm-8">
                <div class="radio-box">
                    <input type="radio" name="status">
                    <label>123</label>
                </div>
            </div>
        </div>

    </form>
    <hr>

    <form class="form-horizontal m" id="form-competition-addgroup">
        <div class="form-group">
            <label class="col-sm-3 control-label" style="text-align: left">最少人数：</label>
            <label class="col-sm-3 control-label" style="text-align: left">最多人数：</label>
            <label class="col-sm-3 control-label" style="text-align: left">组数：</label>
            <!--<div class="col-sm-8">-->
            <!--<input name="num" class="form-control" type="text">-->
            <!--</div>-->
            <a class="btn btn-success col-sm-1" onclick="addGroup()">
                <i class="fa fa-plus"></i> 添加
            </a>
        </div>
        <div class="form-group group" >
            <div class="col-sm-3">
                <input name="min" class="form-control" type="text" placeholder="请输入最少人数" aria-required="true"
                       oninput="value=value.replace(/[^\d]/g,'')">
            </div>
            <div class="col-sm-3">
                <input name="max" class="form-control" type="text" placeholder="请输入最多人数" aria-required="true"
                       oninput="value=value.replace(/[^\d]/g,'')">
            </div>
            <div class="col-sm-3">
                <input name="groupNum" class="form-control" type="text" placeholder="请输入组数" aria-required="true"
                       oninput="value=value.replace(/[^\d]/g,'')">
            </div>
            <a class="btn btn-danger btn-del btn-del col-sm-1" onclick="del($(this))">
                <i class="fa fa-remove"></i> 删除
            </a>
        </div>
    </form>

    <hr>
    <form class="form-horizontal m" id="form-competition-addkv">
        <div class="form-group">
            <label class="col-sm-3 control-label">事务标题：</label>
            <!--todo
                添加竖线,增加美感
            -->
            <!--<div class="col-sm-1" style="float:left;margin-top: 30px;width: 1px;height: 10px; background: darkgray;"></div>-->
            <label class="col-sm-8 control-label" style="text-align: left">事务内容：</label>
            <a class="btn btn-success col-sm-1" onclick="addKV()">
                <i class="fa fa-plus"></i> 添加
            </a>
        </div>

    </form>
</div>
<div th:include="include::footer"></div>
<script type="text/javascript">
    var prefix = ctx + "system/competition"
    $("#form-competition-add").validate({
        rules: {
            // xxxx: {
            //     required: true,
            // },
        }
    });

    function del(obj) {
        obj.parent().remove();
    }

    function f() {
        alert(123);

    }

    function addKV() {
        $('.form-group').last().after(
            `
            <div class="form-group">
                <div class="col-sm-3">
                    <input name="k" class="form-control" type="text" placeholder="请添加相应标题" >
                </div>
                <div class="col-sm-8">
                    <textarea  name="v" class="form-control" type="text" placeholder="请添加相应内容" />
                </div>
                <a class="btn btn-danger btn-del btn-del col-sm-1" onclick="del($(this))">
                    <i class="fa fa-remove"></i> 删除
                </a>
            </div>
            `
        );
    }

    function addGroup() {
        $('.group').last().after(
            `
            <div class="form-group group">
                <div class="col-sm-3">
                    <input name="min" class="form-control" type="text" placeholder="请输入最少人数" oninput="value=value.replace(/[^\\d]/g,'')">
                </div>
                <div class="col-sm-3">
                    <input name="max" class="form-control" type="text" placeholder="请输入最多人数" oninput="value=value.replace(/[^\\d]/g,'')">
                </div>
                <div class="col-sm-3">
                    <input name="groupNum" class="form-control" type="text" placeholder="请输入组数" oninput="value=value.replace(/[^\\d]/g,'')">
                </div>
                <a class="btn btn-danger btn-del btn-del col-sm-1" onclick="del($(this))">
                    <i class="fa fa-remove"></i> 删除
                </a>
            </div>
            `
        );
    }

    function submitHandler() {
        if ($.validate.form()) {
            let add = $('#form-competition-add').serialize();
            console.log( add );
            let addkv = $('#form-competition-addkv').serialize();
            console.log( addkv );
            let addgroup = $('#form-competition-addgroup').serialize();
            console.log( addgroup );
            $.operate.save(prefix + "/add", add + '&' + addkv + '&' + addgroup);
        }
    }
</script>
</body>
</html>
